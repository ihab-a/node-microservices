services:
 db:
  container_name: micro_mongodb
  image: mongo
  ports:
    - 27017:27017
  restart: always
 rabbitmq:
  container_name: micro_rabbitmq
  image: rabbitmq
  ports:
    - 5672:5672
  restart: always
 authentication:
  container_name: micro_authentication
  build: authentication
  ports:
   - 9003:9003
  depends_on:
   - db
   - rabbitmq
  restart: always
 user:
  container_name: micro_user
  build: user
  ports:
   - 9001:9001
  depends_on:
   - db
   - rabbitmq
  restart: always
 book:
  container_name: micro_book
  build: book
  ports:
   - 9002:9002
  depends_on:
   - db
   - rabbitmq
  restart: always
 transaction:
  container_name: micro_transaction
  build: transaction
  ports:
   - 9004:9004
  depends_on:
   - db
   - rabbitmq
  restart: always